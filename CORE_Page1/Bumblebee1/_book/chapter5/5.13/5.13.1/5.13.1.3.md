#### **5.13.1.3 非向量处理模式的中断咬尾**

对于非向量处理模式的中断而言，由于在跳入和退出中断服务程序之前，处理器要进行上下文的保存和恢复，因此进行“中断咬尾”能够节省显著的时间（节省一次背靠背的保存上下文和恢复上下文）。

如上文所述，在所有非向量中断共享的共有代码段中，在跳入中断服务程序的同时，“csrrw ra， CSR_JALMNXTI， ra”指令还会达到JAL（Jump and Link）的效果，硬件同时更新Link寄存器的值为该指令的PC自身作为函数调用的返回地址。因此，从中断服务程序函数返回后会回到该“csrrw ra， CSR_JALMNXTI， ra”指令重新执行，重新判断是否还有中断在等待（Pending），从而达到中断咬尾的效果。

如图 511中所示的示例：假设中断源30、29、28这三个中断源先后到来，且“中断源30的级别” >= “中断源29的级别”>= “中断源28的级别”，那么后来的中断不会打断之前正在处理的中断（不会形成中断嵌套），但是会被置于等待（Pending）状态。当中断源30完成处理后，将会直接开始中断源29的中断处理，省掉中间的“恢复上下文”和“保存上下文”过程。



![](5.13.1.3.assets/18.png)

​                                                              **<center>图 5-11 中断咬尾示意图</center>**

